<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>PTHREE — Kegiatan</title>
  <link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
  <style>
    :root{--bg:#fff;--surface:#f7f9fc;--text:#0b0f14;--muted:#5b6673;--accent:#1e88e5;--accent-2:#111827;--border:1px solid rgba(17,24,39,.08);--shadow:0 10px 24px rgba(2,6,23,.08);--radius:14px;--container:1200px;--ease:cubic-bezier(.22,.61,.36,1)}
    *{box-sizing:border-box} html{scroll-behavior:smooth;scroll-padding-top:72px} body{margin:0;font-family:"Montserrat",system-ui,sans-serif;background:var(--bg);color:var(--text)}
    a{color:var(--accent);text-decoration:none} a:hover{text-decoration:underline}
    .container{max-width:var(--container);margin:auto;padding:0 1rem}

    /* Navbar V2 + tema tetap */
    .topbar{position:sticky;top:0;z-index:60;background:#fff;border-bottom:1px solid rgba(2,6,23,.06)}
    .topbar-inner{display:flex;align-items:center;justify-content:space-between;height:72px}
    .brand{font-weight:800;color:var(--accent-2)}
    .brand-wrap{display:inline-flex;align-items:center;gap:.6rem;text-decoration:none}
    .brand-logo{width:28px;height:28px;object-fit:cover;border-radius:6px}
    .hamb{width:40px;height:40px;border-radius:10px;border:1px solid rgba(2,6,23,.12);display:grid;place-content:center;background:#fff;cursor:pointer}
    .hamb i{font-size:18px;color:var(--accent-2)}
    .nav-inline{display:none;align-items:center;gap:.25rem}
    .nav-inline .nav-link{display:inline-block;padding:10px 12px;border-radius:10px;font-weight:600;color:var(--accent-2);opacity:.9;text-decoration:none}
    .nav-inline .nav-link:hover{background:rgba(2,6,23,.05);opacity:1;text-decoration:none}
    .nav-inline .nav-link.active{background:rgba(2,6,23,.06);box-shadow:inset 0 0 0 1px rgba(2,6,23,.08);opacity:1}
    @media (min-width:900px){.nav-inline{display:flex}.hamb{display:none}}

    .mobile-menu{position:fixed;inset:0;background:var(--accent-2);color:#fff;transform:translateY(-100%);opacity:0;pointer-events:none;transition:transform .35s var(--ease),opacity .35s ease;display:flex;flex-direction:column;z-index:999}
    .mobile-menu.open{transform:translateY(0);opacity:1;pointer-events:auto}
    .mobile-menu__bar{display:flex;align-items:center;justify-content:space-between;padding:16px;border-bottom:1px solid rgba(255,255,255,.12)}
    .mobile-menu__close{width:40px;height:40px;border-radius:10px;background:rgba(255,255,255,.06);border:1px solid rgba(255,255,255,.18);display:grid;place-content:center;cursor:pointer;color:#fff}
    .mobile-menu__links{display:flex;flex-direction:column;gap:8px;padding:24px 16px;max-width:var(--container);margin:32px auto 0}
    .mobile-menu__links a{display:block;padding:16px 12px;border-radius:12px;color:#fff;font-weight:700;font-size:1.2rem;border:1px solid rgba(255,255,255,.12)}
    .mobile-menu__links a.active{background:#0f172a;border-color:rgba(255,255,255,.22)}
    .no-scroll{overflow:hidden}

    main{padding:1rem 0}
    h1{margin:1.2rem 0 .2rem}
    .muted{color:var(--muted)}
    .sep{border:none;height:1px;background:linear-gradient(90deg,transparent,rgba(2,6,23,.15),transparent);margin:.6rem 0 1.2rem}

    /* Slider */
    .carousel{position:relative;overflow:hidden;border-radius:var(--radius);box-shadow:var(--shadow);margin:1rem 0 2rem;background:#fff;border:var(--border)}
    .track{display:flex;touch-action:pan-y;will-change:transform}
    .slide{min-width:100%;user-select:none}
    .slide img{width:100%;display:block;aspect-ratio:16/9;object-fit:cover;-webkit-user-drag:none;user-select:none;pointer-events:none}
    .dots{position:absolute;left:0;right:0;bottom:.5rem;display:flex;gap:.35rem;justify-content:center;pointer-events:none}
    .dot{width:8px;height:8px;border-radius:10px;background:rgba(0,0,0,.25)}
    .dot.active{background:#fff;box-shadow:0 0 0 2px rgba(0,0,0,.2)}

    /* Masonry */
    .masonry{column-count:1;column-gap:1rem}
    .masonry img{width:100%;display:block;margin:0 0 1rem;border-radius:12px;background:#fff;box-shadow:var(--shadow)}
    @media (min-width:640px){.masonry{column-count:2}}
    @media (min-width:1024px){.masonry{column-count:3}}

    footer{text-align:center;padding:2rem 0 3rem;color:var(--muted)}

    /* Reveal + transition */
    .reveal{opacity:0;transform:translateY(14px);transition:opacity .55s var(--ease),transform .55s var(--ease);will-change:opacity,transform}
    .reveal.visible{opacity:1;transform:none}
    body.page-enter{animation:pageIn .35s var(--ease) both}
    body.page-exit{animation:pageOut .22s var(--ease) both}
    @keyframes pageIn{from{opacity:0;transform:translateY(8px)}to{opacity:1;transform:none}}
    @keyframes pageOut{to{opacity:0;transform:translateY(6px)}}

    /* =========================
       TAMBAHAN/OVERRIDE (tidak menghapus kode awal)
       - Drawer mobile menu + fix navbar hilang saat scroll
    ========================== */

    /* Ubah overlay menjadi drawer kanan */
    header .mobile-menu{
      position:fixed; inset:0; z-index:999;
      transform:none !important;
      opacity:1 !important;
      background:transparent !important;
      pointer-events:none;
      display:block;
      visibility:hidden; /* benar2 tak menghalangi header saat tertutup */
    }
    header .mobile-menu.open{ pointer-events:auto; visibility:visible; z-index:2000 !important; }

    .mobile-menu__backdrop{
      position:absolute; inset:0;
      background:rgba(2,6,23,.55);
      opacity:0;
      transition:opacity .25s var(--ease);
    }
    .mobile-menu.open .mobile-menu__backdrop{ opacity:1; }

    .mobile-menu__panel{
      position:absolute; top:0; right:0; height:100%;
      width:min(88vw,380px);
      background:var(--accent-2); color:#fff;
      box-shadow:-16px 0 32px rgba(2,6,23,.18);
      border-left:1px solid rgba(255,255,255,.12);
      transform:translateX(100%);
      transition:transform .35s var(--ease);
      display:flex; flex-direction:column;
      padding-bottom:env(safe-area-inset-bottom);
    }
    .mobile-menu.open .mobile-menu__panel{ transform:translateX(0); }

    /* Lock scroll stabil saat drawer terbuka (anti loncat) */
    .no-scroll{ position:fixed; inset:0; overflow:hidden; }

    /* Fix navbar hilang saat scroll di mobile: jadikan header fixed + beri padding body */
    :root{ --topbar-h:72px; }
    html{ scroll-padding-top: var(--topbar-h) !important; }
    @media (max-width:899.98px){
      .topbar{ position:fixed !important; top:0; left:0; right:0; z-index:1000; }
      body{ padding-top: var(--topbar-h); }
    }

    /* Preferensi reduce motion */
    @media (prefers-reduced-motion:reduce){
      .mobile-menu__backdrop, .mobile-menu__panel{ transition:none; }
    }

  #backToTop{
  position:fixed;
  bottom:24px;
  right:24px;
  width:44px;
  height:44px;
  border-radius:50%;
  border:none;
  background:var(--accent);
  color:#fff;
  font-size:18px;
  cursor:pointer;
  box-shadow:0 4px 12px rgba(0,0,0,.2);
  opacity:0;
  visibility:hidden;
  transition:opacity .3s,visibility .3s,transform .3s;
  z-index:1000;
}
#backToTop:hover{
  background:#1565c0;
  transform:translateY(-3px);
}
#backToTop.show{
  opacity:1;
  visibility:visible;
}

/* === LOCK HORIZONTAL SCROLL & OVERSCROLL (mobile-safe) === */
html, body{
  max-width:100%;
  overflow-x:hidden;           /* cegah halaman geser ke kanan */
  overscroll-behavior-x:none;  /* matikan bounce/geser balik di Android */
  touch-action:pan-y;          /* kunci gesture ke vertikal (slider override di track) */
}
/* pastikan kontainer besar tak melewati lebar viewport */
.container,
.carousel,
.masonry,
.video-grid{
  max-width:100vw;
}
/* jaga media tidak meluber */
img, iframe{
  max-width:100%;
}
/* opsi iOS: tetap smooth */
body{
  -webkit-overflow-scrolling: touch;
}
  </style>
</head>
<body>
  <header class="topbar">
    <div class="container topbar-inner">
      <a href="index.html" class="brand-wrap" aria-label="Beranda PTHREE">
        <img src="https://i.imgur.com/u2k2fsE.jpg" alt="Logo PTHREE" class="brand-logo">
        <span class="brand">PTHREE</span>
      </a>

      <nav class="nav-inline" aria-label="Navigasi utama">
        <a class="nav-link" href="index.html">Dashboard</a>
        <a class="nav-link active" href="kegiatan.html" aria-current="page">Kegiatan</a>
        <a class="nav-link" href="tentang.html">Tentang</a>
        <a class="nav-link" href="kontak.html">Kontak</a>
      </nav>

      <button class="hamb" id="hamb" aria-label="Buka menu" aria-controls="menu" aria-expanded="false">
        <i class="fa fa-bars"></i>
      </button>
    </div>

    <!-- Overlay menu (mobile) — drawer kanan + backdrop -->
<nav class="mobile-menu" id="menu" aria-label="Navigasi seluler" aria-hidden="true">
  <div class="mobile-menu__backdrop" data-close></div>

  <div class="mobile-menu__panel" role="dialog" aria-modal="true" aria-labelledby="mobileMenuTitle">
    <div class="mobile-menu__bar">
      <strong id="mobileMenuTitle">PTHREE</strong>
      <button class="mobile-menu__close" id="closeMenu" aria-label="Tutup menu" data-close>
        <i class="fa fa-close" aria-hidden="true"></i>
      </button>
    </div>

    <div class="mobile-menu__links">
      <a class="active" href="index.html" aria-current="page">Dashboard</a>
      <a href="kegiatan.html">Kegiatan</a>
      <a href="tentang.html">Tentang</a>
      <a href="kontak.html">Kontak</a>
    </div>
  </div>
</nav>

  </header>

  <main class="container">
    <h1 class="reveal">Kegiatan & Galeri</h1>
    <p class="muted reveal">Dokumentasi visual kegiatan PTHREE.</p>
    <hr class="sep">

    <!-- Slider -->
    <div class="carousel reveal" aria-label="Galeri pilihan">
      <div class="track" id="track">
        <!-- URL gambar tetap, tidak diubah -->
        <div class="slide"><img src="https://ik.imagekit.io/3fgrgeqi6z/WhatsApp%20Image%202025-02-06%20at%2013.58.08_e13edae4.jpg?updatedAt=1761223838127" alt="Galeri 1" loading="lazy" decoding="async"></div>
        <div class="slide"><img src="https://imgur.com/eIFXKLW.jpg" alt="Galeri 2" loading="lazy" decoding="async"></div>
        <div class="slide"><img src="https://imgur.com/8ev83tB.jpg" alt="Galeri 3" loading="lazy" decoding="async"></div>
        <div class="slide"><img src="https://i.imgur.com/rjVU3La.jpeg" alt="Galeri 3" loading="lazy" decoding="async"></div>
        <div class="slide"><img src="https://i.imgur.com/MkZWWpE.jpeg" alt="Galeri 3" loading="lazy" decoding="async"></div>
        <div class="slide"><img src="https://ik.imagekit.io/3fgrgeqi6z/WhatsApp%20Image%202025-07-25%20at%2014.31.03_cd7a0283.jpg?updatedAt=1761223492385" alt="Galeri 3" loading="lazy" decoding="async"></div>
      </div>
      <div class="dots" id="dots"></div>
    </div>

    <!-- Masonry -->
    <div class="masonry reveal">
      <!-- URL gambar tetap, tidak diubah -->
      <img src="https://i.imgur.com/avLGlgl.jpeg.jpg" alt="Kegiatan 1" loading="lazy" decoding="async">
      <img src="https://i.imgur.com/hQWCNhy.jpeg.jpg" alt="Kegiatan 2" loading="lazy" decoding="async">
      <img src="https://i.imgur.com/VwV8I4m.jpeg.jpg" alt="Kegiatan 3" loading="lazy" decoding="async">
      <img src="https://i.imgur.com/Eik3T7C.jpeg.jpg" alt="Kegiatan 7" loading="lazy" decoding="async">
      <img src="https://i.imgur.com/dqLtu9J.jpeg.jpg" alt="Kegiatan 8" loading="lazy" decoding="async">
      <img src="https://ik.imagekit.io/3fgrgeqi6z/WhatsApp%20Image%202025-02-07%20at%2009.58.12_494a4948.jpg?updatedAt=1761224280622" alt="Kegiatan 8" loading="lazy" decoding="async">
      <img src="https://i.imgur.com/MkZWWpE.jpeg" alt="Kegiatan 8" loading="lazy" decoding="async">
      <img src="https://ik.imagekit.io/3fgrgeqi6z/WhatsApp%20Image%202025-07-25%20at%2014.31.03_cd7a0283.jpg?updatedAt=1761223492385" alt="Kegiatan 8" loading="lazy" decoding="async">
      <img src="https://ik.imagekit.io/3fgrgeqi6z/WhatsApp%20Image%202024-11-26%20at%2016.50.57_e0c09027.jpg?updatedAt=1761224200756" alt="Kegiatan 8" loading="lazy" decoding="async">
    </div>

    <footer class="reveal">
      <p>© PTHREE 2025</p>
    </footer>
  </main>
<button id="backToTop" aria-label="Kembali ke atas">
  <i class="fa fa-arrow-up"></i>
</button>
  <script>
function bindMenu(){
  const hamb = document.getElementById('hamb');
  const menu = document.getElementById('menu');
  const closeBtn = document.getElementById('closeMenu');
  if (!hamb || !menu) return;

  const openMenu = ()=>{ menu.classList.add('open'); document.body.classList.add('no-scroll'); hamb.setAttribute('aria-expanded','true'); };
  const closeMenu = ()=>{ menu.classList.remove('open'); document.body.classList.remove('no-scroll'); hamb.setAttribute('aria-expanded','false'); };

  hamb.onclick = openMenu;
  if (closeBtn) closeBtn.onclick = closeMenu;
  menu.addEventListener('click', (e)=>{ if(e.target.tagName === 'A') closeMenu(); });
  document.addEventListener('keydown', (e)=>{ if(e.key === 'Escape') closeMenu(); });
}

function initReveals(){
  const els = document.querySelectorAll('.reveal, .reveal-stagger');
  if (!els.length) return;
  const io = new IntersectionObserver((entries)=>{
    entries.forEach(ent=>{ if(ent.isIntersecting){ ent.target.classList.add('visible'); io.unobserve(ent.target); }});
  }, { threshold:.18, rootMargin:"0px 0px -10% 0px" });
  els.forEach(el=>io.observe(el));
}

/* =========================
   Slider: smooth di mobile
   - Pointer Events + axis-lock
   - Lebar slide = lebar viewport carousel
   - translate3d + rAF
========================= */
function initSliderIfExists(){
  const track = document.getElementById('track');
  if (!track) return;

  const slides = Array.from(track.children);
  const dotsWrap = document.getElementById('dots');

  let idx = 0;
  let startX = 0, startY = 0;
  let baseX = 0;
  let dragging = false;
  let axis = null; // 'x' | 'y' | null
  let raf = null, pendingX = 0;
  let auto = null;
  const reduce = matchMedia('(prefers-reduced-motion:reduce)').matches;

  // Lebar yang benar: lebar viewport carousel (bukan track)
  const viewport = track.parentElement;
  const W = ()=> viewport.clientWidth;

  const setX = (px)=>{
    pendingX = px;
    if (raf) return;
    raf = requestAnimationFrame(()=>{ track.style.transform = `translate3d(${pendingX}px,0,0)`; raf = null; });
  };

  function go(i, trans=true){
    idx = (i + slides.length) % slides.length;
    track.style.transition = trans ? 'transform .45s cubic-bezier(.22,.61,.36,1)' : 'none';
    setX(-idx * W());
    paint();
  }

  function paint(){
    if (!dotsWrap) return;
    dotsWrap.innerHTML = '';
    slides.forEach((_,i)=>{
      const d = document.createElement('span');
      d.className = 'dot' + (i===idx ? ' active' : '');
      dotsWrap.appendChild(d);
    });
  }

  function playAuto(){ if(reduce) return; stopAuto(); auto = setInterval(()=>go(idx+1), 5000); }
  function stopAuto(){ if(auto){ clearInterval(auto); auto = null; } }

  // Tambahan: clamp dengan sedikit rubber-band di tepi
  function clampWithRubber(x, min, max){
    if (x > max) return max + (x - max) * 0.35;
    if (x < min) return min + (x - min) * 0.35;
    return x;
  }

  // Pointer Events
  const SLOP = 6; // px: untuk menentukan arah awal

  function onDown(e){
    if (e.pointerType === 'mouse' && e.button !== 0) return; // hanya left click
    dragging = true; axis = null;
    startX = e.clientX; startY = e.clientY;
    baseX  = -idx * W();
    track.style.transition = 'none';
    stopAuto();
    try{ track.setPointerCapture(e.pointerId); }catch{}
  }

  function onMove(e){
    if (!dragging) return;

    const dx = e.clientX - startX;
    const dy = e.clientY - startY;

    if (!axis){
      if (Math.abs(dx) < SLOP && Math.abs(dy) < SLOP) return;
      axis = Math.abs(dx) > Math.abs(dy) ? 'x' : 'y';
    }

    if (axis === 'y'){
      // Balik ke scroll halaman
      dragging = false;
      try{ track.releasePointerCapture(e.pointerId); }catch{}
      return;
    }

    // axis === 'x' -> kunci horizontal & cegah scroll
    e.preventDefault();

    // Batas geser: 0 s/d -(jumlahSlide-1)*W(), dengan rubber band di tepi
    const maxX = 0;
    const minX = -((slides.length - 1) * W());
    const next = clampWithRubber(baseX + dx, minX, maxX);

    setX(next);
  }

  function onUp(e){
    if (!dragging) return;
    dragging = false;
    try{ track.releasePointerCapture(e.pointerId); }catch{}

    const dx = e.clientX - startX;
    const th = W() * 0.12; // 12% lebar layar

    if (dx < -th)      go(idx+1);
    else if (dx > th)  go(idx-1);
    else               go(idx);

    playAuto();
  }

  track.addEventListener('pointerdown', onDown, {passive:false});
  window.addEventListener('pointermove', onMove, {passive:false});
  window.addEventListener('pointerup', onUp);
  window.addEventListener('pointercancel', onUp);

  // Pause/resume auto
  track.addEventListener('mouseenter', stopAuto);
  track.addEventListener('mouseleave', playAuto);
  document.addEventListener('visibilitychange', ()=>{ document.hidden ? stopAuto() : playAuto(); });

  // Responsif
  window.addEventListener('resize', ()=>go(idx,false));

  // Start
  go(0,false);
  playAuto();
}

function initPageTransitions(){
  document.body.classList.add('page-enter');
  const isInternal = (a)=>{ try{ return a.origin===location.origin && !a.hasAttribute('download') && !a.target; }catch{return false;} };
  document.addEventListener('click',(e)=>{
    const a=e.target.closest('a'); if(!a) return;
    const href=a.getAttribute('href')||''; if(href.startsWith('#')) return; if(!isInternal(a)) return;
    if(e.metaKey||e.ctrlKey||e.shiftKey||e.altKey||e.button===1) return;
    e.preventDefault(); document.body.classList.add('page-exit'); setTimeout(()=>{ window.location.href=a.href; },220);
  });
}

/* =========================
   OVERRIDE bindMenu() — versi stabil (tanpa hapus versi lama)
   - Simpan & kembalikan scrollY (anti loncat)
   - Klik backdrop / tombol close / link menutup
========================= */
function bindMenu(){
  const hamb = document.getElementById('hamb');
  const menu = document.getElementById('menu');
  if (!hamb || !menu) return;

  const panel = menu.querySelector('.mobile-menu__panel') || menu;
  const backdrop = menu.querySelector('.mobile-menu__backdrop');
  let lastFocus = null;
  let lastScrollY = 0;

  const focusableSel = 'a[href], button:not([disabled]), [tabindex]:not([tabindex="-1"])';

  function openMenu(){
    menu.classList.add('open');
    menu.setAttribute('aria-hidden','false');
    hamb.setAttribute('aria-expanded','true');

    lastFocus = document.activeElement;
    lastScrollY = window.scrollY || 0;
    document.body.classList.add('no-scroll');
    document.body.style.top = -lastScrollY + 'px';

    const first = panel.querySelector(focusableSel);
    if (first) first.focus({preventScroll:true});

    document.addEventListener('keydown', onKeydown);
  }

  function closeMenu(){
    menu.classList.remove('open');
    menu.setAttribute('aria-hidden','true');
    hamb.setAttribute('aria-expanded','false');

    document.body.classList.remove('no-scroll');
    document.body.style.top = '';
    window.scrollTo(0, lastScrollY);

    document.removeEventListener('keydown', onKeydown);
    if (lastFocus && lastFocus.focus) lastFocus.focus({preventScroll:true});
  }

  function onKeydown(e){
    if (e.key === 'Escape') closeMenu();
  }

  hamb.addEventListener('click', openMenu);

  menu.addEventListener('click', (e)=>{
    if (e.target.closest('[data-close]')) { closeMenu(); return; }
    const link = e.target.closest('a[href]');
    if (link) closeMenu();
  });
  if (backdrop) backdrop.addEventListener('click', closeMenu);
}

/* ==== RUN ==== */
bindMenu();
initReveals();
initSliderIfExists();
initPageTransitions();

const backToTop = document.getElementById('backToTop');
if(backToTop){
  window.addEventListener('scroll', ()=>{
    if(window.scrollY > 400) backToTop.classList.add('show');
    else backToTop.classList.remove('show');
  });
  backToTop.addEventListener('click', ()=>{
    window.scrollTo({top:0, behavior:'smooth'});
  });
}
  </script>
</body>
</html>
