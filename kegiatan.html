<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>PTHREE — Kegiatan</title>
  <link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

  <style>
    :root{--bg:#fff;--surface:#f7f9fc;--text:#0b0f14;--muted:#5b6673;--accent:#1e88e5;--accent-2:#111827;--border:1px solid rgba(17,24,39,.08);--shadow:0 10px 24px rgba(2,6,23,.08);--radius:14px;--container:1200px;--ease:cubic-bezier(.22,.61,.36,1)}
    *{box-sizing:border-box}
    html{scroll-behavior:smooth;scroll-padding-top:72px}
    body{margin:0;font-family:"Montserrat",system-ui,sans-serif;background:var(--bg);color:var(--text)}
    a{color:var(--accent);text-decoration:none} a:hover{text-decoration:underline}
    .container{max-width:var(--container);margin:auto;padding:0 1rem}

    /* Navbar */
    .topbar{position:sticky;top:0;z-index:60;background:#fff;border-bottom:1px solid rgba(2,6,23,.06)}
    .topbar-inner{display:flex;align-items:center;justify-content:space-between;height:72px}
    .brand{font-weight:800;color:var(--accent-2)}
    .brand-wrap{display:inline-flex;align-items:center;gap:.6rem;text-decoration:none}
    .brand-logo{width:28px;height:28px;object-fit:cover;border-radius:6px}
    .hamb{width:40px;height:40px;border-radius:10px;border:1px solid rgba(2,6,23,.12);display:grid;place-content:center;background:#fff;cursor:pointer}
    .hamb i{font-size:18px;color:var(--accent-2)}
    .nav-inline{display:none;align-items:center;gap:.25rem}
    .nav-inline .nav-link{display:inline-block;padding:10px 12px;border-radius:10px;font-weight:600;color:var(--accent-2);opacity:.9;text-decoration:none}
    .nav-inline .nav-link:hover{background:rgba(2,6,23,.05);opacity:1;text-decoration:none}
    .nav-inline .nav-link.active{background:rgba(2,6,23,.06);box-shadow:inset 0 0 0 1px rgba(2,6,23,.08);opacity:1}
    @media (min-width:900px){.nav-inline{display:flex}.hamb{display:none}}

    .mobile-menu{position:fixed;inset:0;background:var(--accent-2);color:#fff;transform:translateY(-100%);opacity:0;pointer-events:none;transition:transform .35s var(--ease),opacity .35s ease;display:flex;flex-direction:column;z-index:999}
    .mobile-menu.open{transform:translateY(0);opacity:1;pointer-events:auto}
    .mobile-menu__bar{display:flex;align-items:center;justify-content:space-between;padding:16px;border-bottom:1px solid rgba(255,255,255,.12)}
    .mobile-menu__close{width:40px;height:40px;border-radius:10px;background:rgba(255,255,255,.06);border:1px solid rgba(255,255,255,.18);display:grid;place-content:center;cursor:pointer;color:#fff}
    .mobile-menu__links{display:flex;flex-direction:column;gap:8px;padding:24px 16px;max-width:var(--container);margin:32px auto 0}
    .mobile-menu__links a{display:block;padding:16px 12px;border-radius:12px;color:#fff;font-weight:700;font-size:1.2rem;border:1px solid rgba(255,255,255,.12)}
    .mobile-menu__links a.active{background:#0f172a;border-color:rgba(255,255,255,.22)}
    .no-scroll{overflow:hidden}

    main{padding:1rem 0}
    h1{margin:1.2rem 0 .2rem}
    .muted{color:var(--muted)}
    .sep{border:none;height:1px;background:linear-gradient(90deg,transparent,rgba(2,6,23,.15),transparent);margin:.6rem 0 1.2rem}

    /* Slider */
    .carousel{position:relative;overflow:hidden;border-radius:var(--radius);box-shadow:var(--shadow);margin:1rem 0 2rem;background:#fff;border:var(--border);overscroll-behavior:contain}
    .track{
      display:flex;
      will-change:transform;
      touch-action:pan-y pinch-zoom; /* izinkan scroll vertikal, kita kunci ke horizontal saat drag */
      user-select:none;
    }
    .slide{min-width:100%;user-select:none}
    .slide img{
      width:100%;
      display:block;
      aspect-ratio:16/9;
      object-fit:cover;
      -webkit-user-drag:none;
      user-drag:none;
      pointer-events:none; /* biar jempol tidak “nempel” ke image */
    }
    .dots{position:absolute;left:0;right:0;bottom:.5rem;display:flex;gap:.35rem;justify-content:center;pointer-events:auto}
    .dot{width:8px;height:8px;border-radius:10px;background:rgba(0,0,0,.25);cursor:pointer}
    .dot.active{background:#fff;box-shadow:0 0 0 2px rgba(0,0,0,.2)}

    /* Masonry */
    .masonry{column-count:1;column-gap:1rem}
    .masonry img{width:100%;display:block;margin:0 0 1rem;border-radius:12px;background:#fff;box-shadow:var(--shadow)}
    @media (min-width:640px){.masonry{column-count:2}}
    @media (min-width:1024px){.masonry{column-count:3}}

    footer{text-align:center;padding:2rem 0 3rem;color:var(--muted)}

    /* Reveal + transition */
    .reveal{opacity:0;transform:translateY(14px);transition:opacity .55s var(--ease),transform .55s var(--ease);will-change:opacity,transform}
    .reveal.visible{opacity:1;transform:none}
    body.page-enter{animation:pageIn .35s var(--ease) both}
    body.page-exit{animation:pageOut .22s var(--ease) both}
    @keyframes pageIn{from{opacity:0;transform:translateY(8px)}to{opacity:1;transform:none}}
    @keyframes pageOut{to{opacity:0;transform:translateY(6px)}}
  </style>
</head>
<body>
  <header class="topbar">
    <div class="container topbar-inner">
      <a href="index.html" class="brand-wrap" aria-label="Beranda PTHREE">
        <img src="https://i.imgur.com/u2k2fsE.jpg" alt="Logo PTHREE" class="brand-logo">
        <span class="brand">PTHREE</span>
      </a>

      <nav class="nav-inline" aria-label="Navigasi utama">
        <a class="nav-link" href="index.html">Dashboard</a>
        <a class="nav-link active" href="kegiatan.html" aria-current="page">Kegiatan</a>
        <a class="nav-link" href="tentang.html">Tentang</a>
        <a class="nav-link" href="kontak.html">Kontak</a>
      </nav>

      <button class="hamb" id="hamb" aria-label="Buka menu" aria-controls="menu" aria-expanded="false">
        <i class="fa fa-bars"></i>
      </button>
    </div>

    <nav class="mobile-menu" id="menu" aria-label="Navigasi">
      <div class="mobile-menu__bar">
        <strong>PTHREE</strong>
        <button class="mobile-menu__close" id="closeMenu" aria-label="Tutup menu"><i class="fa fa-close"></i></button>
      </div>
      <div class="mobile-menu__links">
        <a href="index.html">Dashboard</a>
        <a class="active" href="kegiatan.html" aria-current="page">Kegiatan</a>
        <a href="tentang.html">Tentang</a>
        <a href="kontak.html">Kontak</a>
      </div>
    </nav>
  </header>

  <main class="container">
    <h1 class="reveal">Kegiatan & Galeri</h1>
    <p class="muted reveal">Dokumentasi visual kegiatan PTHREE.</p>
    <hr class="sep">

    <!-- Slider -->
    <div class="carousel reveal" aria-label="Galeri pilihan">
      <div class="track" id="track" aria-live="polite">
        <div class="slide"><img src="https://i.postimg.cc/sfwngxjk/Whats-App-Image-2025-02-06-at-13-58-08-e13edae4.jpg" alt="Galeri 1" loading="lazy" decoding="async" fetchpriority="high" draggable="false"></div>
        <div class="slide"><img src="https://imgur.com/eIFXKLW.jpg" alt="Galeri 2" loading="lazy" decoding="async" draggable="false"></div>
        <div class="slide"><img src="https://imgur.com/8ev83tB.jpg" alt="Galeri 3" loading="lazy" decoding="async" draggable="false"></div>
        <div class="slide"><img src="https://i.imgur.com/rjVU3La.jpeg" alt="Galeri 4" loading="lazy" decoding="async" draggable="false"></div>
        <div class="slide"><img src="https://i.imgur.com/MkZWWpE.jpeg" alt="Galeri 5" loading="lazy" decoding="async" draggable="false"></div>
        <div class="slide"><img src="https://i.postimg.cc/VsbbvLcV/Whats-App-Image-2025-07-25-at-14-31-03-cd7a0283.jpg" alt="Galeri 6" loading="lazy" decoding="async" draggable="false"></div>
      </div>
      <div class="dots" id="dots" aria-label="Navigasi slide"></div>
    </div>

    <!-- Masonry -->
    <div class="masonry reveal">
      <img src="https://i.imgur.com/avLGlgl.jpeg.jpg" alt="Kegiatan 1" loading="lazy" decoding="async">
      <img src="https://i.imgur.com/hQWCNhy.jpeg.jpg" alt="Kegiatan 2" loading="lazy" decoding="async">
      <img src="https://i.imgur.com/VwV8I4m.jpeg.jpg" alt="Kegiatan 3" loading="lazy" decoding="async">
      <img src="https://i.postimg.cc/bw7pr8Hh/Whats-App-Image-2024-11-26-at-16-50-57-316d298b.jpg" alt="Kegiatan 4" loading="lazy" decoding="async">
      <img src="https://i.postimg.cc/cJB2WNFf/Whats-App-Image-2025-02-07-at-09-58-12-494a4948.jpg" alt="Kegiatan 5" loading="lazy" decoding="async">
      <img src="https://i.postimg.cc/0QpQPjLn/Whats-App-Image-2024-11-26-at-16-49-16-48686d84.jpg" alt="Kegiatan 6" loading="lazy" decoding="async">
      <img src="https://i.imgur.com/Eik3T7C.jpeg.jpg" alt="Kegiatan 7" loading="lazy" decoding="async">
      <img src="https://i.imgur.com/dqLtu9J.jpeg.jpg" alt="Kegiatan 8" loading="lazy" decoding="async">
      <img src="https://i.postimg.cc/VsbbvLcV/Whats-App-Image-2025-07-25-at-14-31-03-cd7a0283.jpg" alt="Kegiatan 9" loading="lazy" decoding="async">
    </div>

    <footer class="reveal">
      <p>© PTHREE 2025</p>
    </footer>
  </main>

  <script>
/* =========================
   Menu mobile
========================= */
function bindMenu(){
  const hamb = document.getElementById('hamb');
  const menu = document.getElementById('menu');
  const closeBtn = document.getElementById('closeMenu');
  if (!hamb || !menu) return;

  const openMenu = ()=>{ menu.classList.add('open'); document.body.classList.add('no-scroll'); hamb.setAttribute('aria-expanded','true'); };
  const closeMenu = ()=>{ menu.classList.remove('open'); document.body.classList.remove('no-scroll'); hamb.setAttribute('aria-expanded','false'); };

  hamb.onclick = openMenu;
  if (closeBtn) closeBtn.onclick = closeMenu;
  menu.addEventListener('click', (e)=>{ if(e.target.tagName === 'A') closeMenu(); });
  document.addEventListener('keydown', (e)=>{ if(e.key === 'Escape') closeMenu(); });
}

/* =========================
   Reveal on scroll
========================= */
function initReveals(){
  const els = document.querySelectorAll('.reveal, .reveal-stagger');
  if (!els.length) return;
  const io = new IntersectionObserver((entries)=>{
    entries.forEach(ent=>{ if(ent.isIntersecting){ ent.target.classList.add('visible'); io.unobserve(ent.target); }});
  }, { threshold:.18, rootMargin:"0px 0px -10% 0px" });
  els.forEach(el=>io.observe(el));
}

/* =========================
   Slider baru (mobile mulus)
   - Pointer Events + axis-lock
   - rAF throttle + translate3d
   - Autoplay aman
========================= */
function initSliderIfExists(){
  const track = document.getElementById('track');
  if (!track) return;

  const carousel = track.closest('.carousel');
  const slides = Array.from(track.children);
  const dotsWrap = document.getElementById('dots');

  let idx = 0;
  let dragging = false;
  let startX = 0, startY = 0;
  let axis = null; // 'x' | 'y' | null
  let raf = null;
  let pendingX = 0;
  let autoTimer = null;
  const reduce = matchMedia('(prefers-reduced-motion: reduce)').matches;

  // Util lebar slide (pakai lebar container, bukan scrollWidth)
  const W = ()=> (carousel?.clientWidth || track.clientWidth || 0);

  // Apply transform pakai rAF agar halus
  function setX(px){
    pendingX = px;
    if (raf) return;
    raf = requestAnimationFrame(()=> {
      track.style.transform = `translate3d(${pendingX}px,0,0)`;
      raf = null;
    });
  }

  function paintDots(){
    if (!dotsWrap) return;
    dotsWrap.innerHTML = slides.map((_,i)=>`<span class="dot${i===idx?' active':''}" data-idx="${i}" aria-label="Ke slide ${i+1}" role="button" tabindex="0"></span>`).join('');
  }

  function go(i, opts={animate:true}){
    idx = (i + slides.length) % slides.length;
    track.style.transition = opts.animate ? 'transform .45s cubic-bezier(.22,.61,.36,1)' : 'none';
    setX(-idx * W());
    paintDots();
  }

  function playAuto(){
    if (reduce) return;
    stopAuto();
    autoTimer = setTimeout(()=>{ go(idx+1); playAuto(); }, 5000);
  }
  function stopAuto(){
    if (autoTimer) clearTimeout(autoTimer);
    autoTimer = null;
  }

  // Nonaktifkan drag di semua gambar (hindari “nyangkut”)
  slides.forEach(s=>{
    const img = s.querySelector('img');
    if (img) img.draggable = false;
  });

  // Axis-lock threshold
  const SLOP = 6; // px untuk menentukan arah

  function onPointerDown(e){
    if (e.pointerType === 'mouse' && e.button !== 0) return; // hanya left-click
    dragging = true; axis = null;
    startX = e.clientX; startY = e.clientY;
    track.style.transition = 'none';
    stopAuto();
    try{ track.setPointerCapture(e.pointerId); }catch{}
  }

  function onPointerMove(e){
    if (!dragging) return;

    const dx = e.clientX - startX;
    const dy = e.clientY - startY;

    // Tentukan axis sekali saja
    if (!axis){
      if (Math.abs(dx) < SLOP && Math.abs(dy) < SLOP) return;
      axis = Math.abs(dx) > Math.abs(dy) ? 'x' : 'y';

      // Jika vertikal, biarkan halaman scroll & batalkan drag
      if (axis === 'y'){ dragging = false; return; }
    }

    // Kunci ke horizontal -> cegah scroll bawaan
    if (axis === 'x'){
      e.preventDefault();
      setX(-idx * W() + dx);
    }
  }

  function onPointerUp(e){
    if (!dragging) return;
    dragging = false;
    try{ track.releasePointerCapture(e.pointerId); }catch{}

    const dx = e.clientX - startX;
    const th = W() * 0.12; // 12% lebar layar

    if (dx < -th)      go(idx+1);
    else if (dx > th)  go(idx-1);
    else               go(idx, {animate:true});

    playAuto();
  }

  // Listener utama (non-passive supaya kita bisa preventDefault)
  track.addEventListener('pointerdown', onPointerDown, {passive:false});
  window.addEventListener('pointermove', onPointerMove, {passive:false});
  window.addEventListener('pointerup', onPointerUp);
  window.addEventListener('pointercancel', onPointerUp);

  // Pause/resume auto
  carousel.addEventListener('pointerenter', stopAuto);
  carousel.addEventListener('pointerleave', playAuto);
  document.addEventListener('visibilitychange', ()=>{ document.hidden ? stopAuto() : playAuto(); });

  // Klik dots
  if (dotsWrap){
    dotsWrap.addEventListener('click', (e)=>{
      const el = e.target.closest('.dot'); if(!el) return;
      const i = Number(el.dataset.idx);
      if (Number.isFinite(i)){ stopAuto(); go(i); playAuto(); }
    });
    // Aksesibilitas via keyboard
    dotsWrap.addEventListener('keydown', (e)=>{
      if (e.key === 'Enter' || e.key === ' ') {
        const el = e.target.closest('.dot'); if(!el) return;
        const i = Number(el.dataset.idx);
        if (Number.isFinite(i)){ e.preventDefault(); stopAuto(); go(i); playAuto(); }
      }
    });
  }

  // Responsif
  window.addEventListener('resize', ()=>go(idx, {animate:false}));

  // Mulai
  paintDots();
  go(0, {animate:false});
  playAuto();
}

/* =========================
   Transition antar halaman
========================= */
function initPageTransitions(){
  document.body.classList.add('page-enter');
  const isInternal = (a)=>{ try{ return a.origin===location.origin && !a.hasAttribute('download') && !a.target; }catch{return false;} };
  document.addEventListener('click',(e)=>{
    const a=e.target.closest('a'); if(!a) return;
    const href=a.getAttribute('href')||''; if(href.startsWith('#')) return; if(!isInternal(a)) return;
    if(e.metaKey||e.ctrlKey||e.shiftKey||e.altKey||e.button===1) return;
    e.preventDefault(); document.body.classList.add('page-exit'); setTimeout(()=>{ window.location.href=a.href; },220);
  });
}

// Inisialisasi
bindMenu();
initReveals();
initSliderIfExists();
initPageTransitions();
  </script>
</body>
</html>
